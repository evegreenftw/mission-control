<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mission Control v3.0</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- Styles (order: tokens → layout → components → view-specific) -->
  <link rel="stylesheet" href="styles/design-tokens.css">
  <link rel="stylesheet" href="styles/layout.css">
  <link rel="stylesheet" href="styles/components.css">
  <link rel="stylesheet" href="styles/views/kanban.css">
  <link rel="stylesheet" href="styles/views/dashboard.css">
  <link rel="stylesheet" href="styles/views/calendar.css">
  <link rel="stylesheet" href="styles/views/spend.css">
  <link rel="stylesheet" href="styles/views/agents.css">
  <link rel="stylesheet" href="styles/views/second-brain.css">
</head>
<body>

  <!-- ============ Password Gate ============ -->
  <div class="password-overlay" id="passwordOverlay">
    <div class="password-box">
      <div class="password-brand">
        <div class="password-brand-icon">MC</div>
        <div class="password-brand-title">Mission Control</div>
        <div class="password-brand-sub">v3.0 — Personal Command Center</div>
      </div>
      <div class="password-form">
        <div class="password-input-wrap">
          <input
            type="password"
            id="passwordInput"
            placeholder="Enter password"
            autocomplete="off"
            spellcheck="false"
          >
        </div>
        <div class="password-error" id="passwordError"></div>
      </div>
    </div>
  </div>

  <!-- ============ App Shell ============ -->
  <div class="app-shell" id="appShell">

    <!-- ---- Sidebar ---- -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-brand">
        <div class="sidebar-brand-icon">MC</div>
        <div>
          <div class="sidebar-brand-name">Mission Control</div>
          <div class="sidebar-brand-version">v3.0</div>
        </div>
      </div>

      <nav class="sidebar-nav">
        <div class="sidebar-nav-label">Views</div>
        <div class="sidebar-nav-item active" data-view="dashboard">
          <span class="nav-icon">&#9635;</span>
          <span class="nav-label">Dashboard</span>
          <span class="nav-badge">1</span>
        </div>
        <div class="sidebar-nav-item" data-view="kanban">
          <span class="nav-icon">&#9783;</span>
          <span class="nav-label">Kanban</span>
          <span class="nav-badge">2</span>
        </div>
        <div class="sidebar-nav-item" data-view="calendar">
          <span class="nav-icon">&#9675;</span>
          <span class="nav-label">Calendar</span>
          <span class="nav-badge">3</span>
        </div>
        <div class="sidebar-nav-item" data-view="spend">
          <span class="nav-icon">&#9651;</span>
          <span class="nav-label">Spend</span>
          <span class="nav-badge">4</span>
        </div>
        <div class="sidebar-nav-item" data-view="agents">
          <span class="nav-icon">&#11043;</span>
          <span class="nav-label">Agents</span>
          <span class="nav-badge">5</span>
        </div>
        <div class="sidebar-nav-item" data-view="brain">
          <span class="nav-icon">&#10686;</span>
          <span class="nav-label">Second Brain</span>
          <span class="nav-badge">6</span>
        </div>
      </nav>

      <div class="sidebar-footer">
        <div class="sidebar-user">
          <div class="sidebar-avatar">E</div>
          <div>
            <div class="sidebar-user-name">Eve</div>
            <div class="sidebar-user-role">Operator</div>
          </div>
        </div>
      </div>
    </aside>
    <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

    <!-- ---- Header ---- -->
    <header class="header">
      <div class="header-left">
        <button class="hamburger-btn" id="hamburgerBtn" aria-label="Toggle sidebar">&#9776;</button>
        <div>
          <div class="header-title" id="headerTitle">Dashboard</div>
          <div class="header-subtitle" id="headerTimestamp"></div>
        </div>
      </div>
      <div class="header-right">
        <div class="header-status-bar" id="statusBar">
          <!-- Status indicators populated by status-bar.js (Prompt 2) -->
        </div>
        <div class="header-actions">
          <button class="btn btn-secondary btn-sm" id="syncBtn" onclick="app.refreshData()">
            Sync
          </button>
        </div>
      </div>
    </header>

    <!-- ---- Main Content ---- -->
    <main class="main-content" id="mainContent">

      <!-- Dashboard View -->
      <div class="view-container active" id="dashboardView">
        <div class="empty-state">
          <div class="empty-state-icon">&#9635;</div>
          <div class="empty-state-title">Dashboard</div>
          <div class="empty-state-message">Loading dashboard data...</div>
          <div style="margin-top: var(--sp-4); display: flex; flex-direction: column; gap: var(--sp-3); width: 100%; max-width: 400px;">
            <div class="loading-skeleton skeleton-heading"></div>
            <div class="loading-skeleton skeleton-card"></div>
            <div class="loading-skeleton skeleton-card"></div>
            <div class="loading-skeleton skeleton-text medium"></div>
          </div>
        </div>
      </div>

      <!-- Kanban View -->
      <div class="view-container" id="kanbanView">
        <div class="empty-state">
          <div class="empty-state-icon">&#9783;</div>
          <div class="empty-state-title">Kanban Board</div>
          <div class="empty-state-message">Loading tasks...</div>
          <div style="margin-top: var(--sp-4); display: flex; gap: var(--sp-3); width: 100%; max-width: 600px;">
            <div class="loading-skeleton skeleton-card" style="flex:1;"></div>
            <div class="loading-skeleton skeleton-card" style="flex:1;"></div>
            <div class="loading-skeleton skeleton-card" style="flex:1;"></div>
          </div>
        </div>
      </div>

      <!-- Calendar View -->
      <div class="view-container" id="calendarView">
        <div class="empty-state">
          <div class="empty-state-icon">&#9675;</div>
          <div class="empty-state-title">Calendar</div>
          <div class="empty-state-message">Loading events...</div>
          <div style="margin-top: var(--sp-4); display: flex; flex-direction: column; gap: var(--sp-3); width: 100%; max-width: 400px;">
            <div class="loading-skeleton skeleton-card"></div>
            <div class="loading-skeleton skeleton-card"></div>
          </div>
        </div>
      </div>

      <!-- Spend View -->
      <div class="view-container" id="spendView">
        <div class="empty-state">
          <div class="empty-state-icon">&#9651;</div>
          <div class="empty-state-title">Spend Analytics</div>
          <div class="empty-state-message">Loading usage data...</div>
          <div style="margin-top: var(--sp-4); width: 100%; max-width: 400px;">
            <div class="loading-skeleton skeleton-chart"></div>
          </div>
        </div>
      </div>

      <!-- Agents View -->
      <div class="view-container" id="agentsView">
        <div class="empty-state">
          <div class="empty-state-icon">&#11043;</div>
          <div class="empty-state-title">Agent Infrastructure</div>
          <div class="empty-state-message">Loading agent status...</div>
          <div style="margin-top: var(--sp-4); display: flex; gap: var(--sp-3); width: 100%; max-width: 400px;">
            <div class="loading-skeleton skeleton-card" style="flex:1;"></div>
            <div class="loading-skeleton skeleton-card" style="flex:1;"></div>
          </div>
        </div>
      </div>

      <!-- Second Brain View -->
      <div class="view-container" id="brainView">
        <div class="empty-state">
          <div class="empty-state-icon">&#10686;</div>
          <div class="empty-state-title">Second Brain</div>
          <div class="empty-state-message">Checking connection to Second Brain API...</div>
          <div style="margin-top: var(--sp-4); width: 100%; max-width: 400px;">
            <div class="loading-skeleton skeleton-text medium"></div>
            <div class="loading-skeleton skeleton-card"></div>
          </div>
        </div>
      </div>

    </main>
  </div>

  <!-- ============ Modal ============ -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="modalTitle"></div>
        <button class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-footer" id="modalFooter"></div>
    </div>
  </div>

  <!-- ============ Toast Container ============ -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- ============ Scripts ============ -->
  <!-- Utils first -->
  <script src="js/utils/dom.js"></script>
  <script src="js/utils/validators.js"></script>
  <!-- Data layer -->
  <script src="js/data/data-service.js"></script>
  <script src="js/data/task-store.js"></script>
  <script src="js/data/calendar-store.js"></script>
  <script src="js/data/spend-store.js"></script>
  <script src="js/data/agent-store.js"></script>
  <script src="js/data/brain-store.js"></script>
  <!-- Components -->
  <script src="js/components/status-bar.js"></script>
  <script src="js/components/chart-manager.js"></script>
  <!-- Views -->
  <script src="js/views/dashboard-view.js"></script>
  <script src="js/views/kanban-view.js"></script>
  <script src="js/views/calendar-view.js"></script>
  <script src="js/views/spend-view.js"></script>
  <script src="js/views/agents-view.js"></script>
  <script src="js/views/brain-view.js"></script>
  <!-- App shell last (depends on all above) -->
  <script src="js/app.js"></script>

</body>
</html>
